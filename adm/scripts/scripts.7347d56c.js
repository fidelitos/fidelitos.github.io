"use strict";function config(a,b,c){b.interceptors.push("HttpInterceptor"),a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/login",{templateUrl:"views/login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/login-client",{templateUrl:"views/client_login.html",controller:"LoginCtrl",controllerAs:"login"}).when("/card",{templateUrl:"views/card.html",controller:"CardCtrl",controllerAs:"card"}).when("/client",{templateUrl:"views/client.html",controller:"ClientCtrl",controllerAs:"client"}).when("/clientIndex",{templateUrl:"views/client_index.html",controller:"MainCtrl",controllerAs:"main"}).when("/ombudsman",{templateUrl:"views/ombudsman.html",controller:"OmbudsmanCtrl",controllerAs:"ombudsman"}).when("/settings",{templateUrl:"views/settings.html",controller:"SettingsCtrl",controllerAs:"settings"}).when("/board",{templateUrl:"views/board.html",controller:"BoardCtrl",controllerAs:"board"}).when("/codes/:cardId",{templateUrl:"views/codes.html",controller:"CodesCtrl",controllerAs:"codes"}).when("/ativacao/:ativacao_cancelamento",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).otherwise({redirectTo:"/"}),c.theme("default").primaryPalette("red").accentPalette("indigo").warnPalette("deep-orange").backgroundPalette("grey")}function HttpInterceptor(a,b,c){var d={request:function(a){return a.headers=a.headers||{},localStorage.getItem("token")&&(a.headers.Authorization="Bearer "+localStorage.getItem("token")),a||b.when(a)},response:function(c){return 401==c.status?(localStorage.removeItem("token"),localStorage.removeItem("login"),a.path("/login")):-1==c.status&&alert("Servidor off the line!"),c||b.when(c)},responseError:function(c){return 401==c.status?(localStorage.removeItem("token"),localStorage.removeItem("login"),a.path("/login")):-1==c.status&&alert("Servidor off the line!"),b.reject(c)}};return d}function Authentication(a,b){return{doLogin:function(c,d,e,f){function g(a){localStorage.setItem("login",c),localStorage.setItem("token",a.data.access_token),e()}function h(a){-1!=a.status&&f(a)}var i=(angular.toJson({grant_type:"password",username:c,password:d}),"grant_type=password&username="+c+"&password="+d);a.post(b+"Token",i).then(g,h)},isLoggedIn:function(){return!(null===localStorage.getItem("token")||null===localStorage.getItem("login"))},doLogout:function(){localStorage.removeItem("token"),localStorage.removeItem("login")},getLogin:function(){return localStorage.getItem("login")}}}function Notification(a,b){var c=b+"api/Client/";return{doNotifCodeAcessSMS:function(b,d,e){a.get(c+"sendAcessCode?cellphone="+b).then(function(a){console.log(a),d(a.data.content)},function(a){console.log(a),e(a)})}}}angular.module("fidelitosadmApp",["ngAnimate","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngMaterial","md.data.table","ngMdIcons","ngFileUpload","ja.qr","cgBusy"]).value("cgBusyDefaults",{message:"Carregando...",backdrop:!0}).config(["$routeProvider","$httpProvider","$mdThemingProvider",config]),angular.module("fidelitosadmApp").controller("MainCtrl",["Authentication","$routeParams","$location","$mdSidenav","$mdMedia","materialAlert","Company","Client","$mdDialog",function(a,b,c,d,e,f,g,h,i){var j=this;j.company=null,j.isLoading=f.loading,this.$mdSidenav=d,this.$mdMedia=e,b.ativacao_cancelamento&&("ativacao"==b.ativacao_cancelamento&&i.show({contentElement:"#divAdesao",parent:angular.element(document.body),targetEvent:null,clickOutsideToClose:!0})["finally"](function(){}),"cancelamento"==b.ativacao_cancelamento&&i.show({contentElement:"#divCancelamento",parent:angular.element(document.body),targetEvent:null,clickOutsideToClose:!0})["finally"](function(){})),this.IsLoggedIn=function(){return a.isLoggedIn()},this.getLogin=function(){return a.getLogin()},this.IsLoggedIn()||c.path("/login"),this.toggleSideNav=function(){d("left").toggle().then(function(){})},this.Logout=function(){a.doLogout(),c.path("login")},this.ShowPagSeguro=function(a){i.show({contentElement:"#divPagamento",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0})["finally"](function(){})},this.closeSideNav=function(){d("left").close()},null===j.company&&g.getInfo(function(a){j.company=a;try{var b=864e5,c=new Date(j.company.record_date);c.setDate(c.getDate()+j.company.period_test_max);var d=Math.round(Math.abs((c.getTime()-(new Date).getTime())/b));j.company.days=d;var e={link:"",method:j.ShowPagSeguro,color:"#f94538",title:"Ativar Conta",icon:"payment"};j.company.signed||j.menu.push(e)}catch(f){}$("#idCompnay").val(a.id),$("#logo").attr("src",a.link_image_little),$("#nameCompany").html(a.name)},function(a){console.log(a)}),j.menu=[{link:"/card",title:"Campanhas Promocionais",icon:"redeem"},{link:"/client",title:"Clientes",icon:"group"},{link:"/settings",title:"Meus Dados",icon:"account_box"},{link:"/board",title:"Mural",icon:"dashboard"},{link:"/ombudsman",title:"Ouvidoria",icon:"record_voice_over"},{link:"/ombudsman",title:"Dashboard",icon:"assessment"},{link:"",method:this.Logout,title:"Sair",icon:"exit_to_app"}]}]),angular.module("fidelitosadmApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("fidelitosadmApp").controller("LoginCtrl",["apiUrl","Authentication","Notification","$location","Company","materialAlert",function(a,b,c,d,e,f){var g=this;g.selectedIndex=0,g.erro="",g.loading=!1,g.counter=120,g.btGerar=!1,g.btEntrar=!1,g.btHaveCode=!1,g.btHaveCodeClicked=!1,g.cadastro={Password:"",ConfirmPassword:"",Name:"",Email:"",CellPhone:"",submit:function(){if(g.loading=!0,g.cadastro.Password!==g.cadastro.ConfirmPassword)return f.toast("A senha não confere!");var a={password:g.cadastro.Password,username:g.cadastro.Email,name:g.cadastro.Name,email:g.cadastro.Email,CellPhone:g.cadastro.CellPhone,Source:"Fidelitos"};e.Create(a,function(a){g.loading=!1,a.data.success?(f.toast("Cadastro realizado com sucesso!"),g.email=g.cadastro.Email,g.password=g.cadastro.Password,g.selectedIndex=0,g.submit()):f.toastErro(a.data.message)},function(a){g.loading=!1,console.log(a),alert("Erro ao processar a solicitação.")})}},g.submit=function(){g.loading=!0,b.doLogin(g.email,g.password,function(){d.path("/"),setTimeout(function(){location.reload()},500)},function(a){g.loading=!1,f.toast("Login e/ou senha incorretos!"),console.log(a)})},g.submitClient=function(){g.loading=!0,b.doLogin(g.cellphone,g.password,function(){d.path("/settings")},function(a){g.loading=!1,f.toast("Login e/ou senha incorretos!"),console.log(a)})},g.generateAccess=function(){g.loading=!0,c.doNotifCodeAcessSMS(g.cellphone,function(){g.loading=!1,f.toast("Código de acesso gerado com sucesso! Favor aguardar o recebimento do SMS"),g.counter=120,$("#div_temp_counter").show(),g.btHaveCode=!0,g.btHaveCodeClicked=!0,h()},function(a){g.loading=!1,f.toast("Houve um problema ao gerar o código de acesso! Tente mais tarde"),console.log(a)})};var h=function(){g.counter--,$("#temp_counter").text(g.counter),g.counter>1?setTimeout(h,1e3):($("#div_temp_counter").hide(),g.btHaveCodeClicked=!1)}}]),angular.module("fidelitosadmApp").constant("apiUrl","http://apifidelitos.azurewebsites.net/"),angular.module("fidelitosadmApp").factory("HttpInterceptor",["$location","$q","$window",HttpInterceptor]),angular.module("fidelitosadmApp").service("Authentication",Authentication),Authentication.$inject=["$http","apiUrl"],angular.module("fidelitosadmApp").service("Notification",Notification),Notification.$inject=["$http","apiUrl"],angular.module("fidelitosadmApp").service("Company",["$http","apiUrl",function(a,b){var c=b+"api/Company/";return{Create:function(c,d,e){function f(a){d(a)}function g(a){-1!==a.status&&e(a)}return a.post(b+"api/Account/RegisterCompany",c).then(f,g)},CreateCardCode:function(b,d,e){var f=c+"generateQrCode";return a.post(f,b).then(d,e)},listAllOmbudsman:function(b,d){return a.get(c+"listOmbudsmanCompany").then(function(a){b(a.data.content)},function(a){d(a)})},getInfo:function(b,d){return a.get(c+"findInfoCompany").then(function(a){b(a.data.content)},function(a){d(a)})},updateInfo:function(b,d,e){return a.post(c+"RegisterInfoCompany",b).then(d,e)},getCardCodes:function(b,d,e,f){return a.get(c+"consultQrCode?idCard="+b+"&status="+d).then(function(a){e(a.data.content)},function(a){f(a)})}}}]),angular.module("fidelitosadmApp").controller("CardCtrl",["$rootScope","$scope","Card","Company","$mdDialog","materialAlert",function(a,b,c,d,e,f){var g=this;g.cards=[],g.cadastro={},g.editing=!1,g.AddCard=function(b){a.promise=c.create(g.cadastro,function(){f.toast("Novo Cartão Adicionado!"),e.hide(),location.reload()},function(a){e.hide()})},g.OpenCodesDialog=function(a){g.codes={},g.codes.qtdAtivos=0,g.codes.qtdUtilizados=0,g.codes.qtdCancelados=0,g.codes.qtdTotal=0,g.codes.idCard=a.id,d.getCardCodes(a.id,"A",function(b){g.codes.qtdAtivos=b.qtd,g.codes.qtdTotal+=b.qtd,d.getCardCodes(a.id,"U",function(a){g.codes.qtdUtilizados=a.qtd,g.codes.qtdTotal+=a.qtd,e.show({contentElement:"#CardCodesDialog",parent:angular.element(document.body),clickOutsideToClose:!0})["finally"](function(){g.codes={}})})})},g.EditCard=function(b){a.promise=c.edit(g.cadastro,function(){f.toast("Cartão alterado com sucesso!"),e.hide(),location.reload(),g.editing=!1},function(a){e.hide()})},g.Edit=function(a){g.editing=!0,g.cadastro=a,g.OpenAddCardDialog()},g.OpenAddCardDialog=function(a){g.editing||(g.cadastro={}),e.show({contentElement:"#addCardDialog",parent:angular.element(document.body),targetEvent:a,clickOutsideToClose:!0})["finally"](function(){g.editing=!1})},g.LoadCards=function(){a.promise=c.listAll(function(a){g.cards=a,e.hide()},function(a){e.hide(),console.log(a)})}}]),angular.module("fidelitosadmApp").service("Card",["apiUrl","$http",function(a,b){var c=a+"api/company/";return{listAll:function(a,d){return b.get(c+"consultCards").then(function(b){a(b.data.content)},function(a){d(a)})},getById:function(a,b,c){return this.listAll(function(c){c.forEach(function(c){return c.id==a?void b(c):void 0},this)},c)},create:function(a,d,e){return b.post(c+"RegisterCard",a).then(function(a){d(a)},function(a){e(a)})},edit:function(a,d,e){return b.post(c+"updateCard",a).then(function(a){d(a)},function(a){e(a)})}}}]),angular.module("fidelitosadmApp").controller("ClientCtrl",["$rootScope","Client","$mdDialog","Card","materialAlert","Company","$scope","$timeout",function(a,b,c,d,e,f,g,h){var i=this;i.achieve=[],i.recording=!1,i.idCompany=0,i.isFabOpen=!1,i.showRegist=!1,g.$watch("client.isFabOpen",function(a){a?h(function(){g.fabTooltipVisible=!0},600):g.fabTooltipVisible=!1}),i.LoadClients=function(d){a.promise=b.listAll(function(a){i.clients=a,c.hide()},function(a){c.hide(),console.log(a)})},i.LoadCards=function(){a.promise=d.listAll(function(a){i.cards=a})},i.RegisterVisit=function(a){i.recording=!0;var c={cellPhoneClient:i.achieve.cellphone,idCard:i.achieve.idCard,score:i.achieve.achieve};b.registerVisit(c,function(a){"true"===a.data.success?(e.toast("Pontos registrados com sucesso!"),$("#cellphoneDivRegistry").val(""),i.achieve.cellphone="",i.recording=!1,i.showRegist=!0,setTimeout(function(){i.showRegist=!1},1e3)):(alert(a.data.message),i.recording=!1)},function(a){console.log(a)})},i.OpenDialogAchieve=function(a){var b=angular.element(document.body);i.achieve.cellphone="",i.LoadCards(),$("#cellphoneDivRegistry").val(""),c.show({contentElement:"#dialogRegistroPontuacao",parent:b,clickOutsideToClose:!0,targetEvent:a})},i.OpenDialogReward=function(){var d=c.prompt().title("Pesquisar recompensa do cliente?").textContent("Celular do cliente com DDD").placeholder("(##) #####-####").ok("Pesquisar").cancel("Cancelar");c.show(d).then(function(d){$.isNumeric(d)&&11===d.length?a.promise=b.getReward(d,function(a){if(null!=a&&"undefined"!=typeof a&&a.length>0){var f=a[0].name+". Pontuação: "+a[0].achieve,g=c.confirm().title("Recompensa para "+d).textContent(f).ok("Registrar Recompensa").cancel("Cancelar");c.show(g).then(function(){var c={idCompany:$("#idCompnay").val(),idCard:a[0].id,cellPhoneClient:d};b.registerReward(c,function(a){"true"===a.data.success?(e.toast("Recompensa registrada com sucesso!"),i.recording=!1):(alert(a.data.message),i.recording=!1)},function(a){console.log(a)})},function(){})}else alert("Não existe recompensa para esse cliente -"+d)},function(){}):alert("Número do cliente invalido! verifique os 11 digitos")},function(a){c.hide(),console.log(a)})}}]),angular.module("fidelitosadmApp").service("Client",["apiUrl","$http",function(a,b){var c=a+"api/client/";return{listAll:function(a,d){return b.get(c+"listDetailClients").then(function(b){a(b.data.content)},function(a){d(a)})},registerVisit:function(c,d,e){return b.post(a+"api/Company/RegisterVisit",c).then(d,e)},getReward:function(a,d,e){return b.get(c+"findCardsReward?cellPhoneClient="+a).then(function(a){d(a.data.content)},function(a){e(a)})},registerReward:function(c,d,e){return b.post(a+"api/Client/RegisterReward",c).then(d,e)}}}]),angular.module("fidelitosadmApp").controller("OmbudsmanCtrl",["$rootScope","Company","$mdDialog",function(a,b,c){var d=this;d.LoadItens=function(e){a.promise=b.listAllOmbudsman(function(a){d.itens=a,c.hide()},function(a){c.hide(),console.log(a)})}}]),angular.module("fidelitosadmApp").controller("SettingsCtrl",["$rootScope","Upload","Company","materialAlert","$mdDialog",function(a,b,c,d,e){var f=this;f.cadastro={},f.uploadLittle=function(c){a.promise=b.upload({url:"http://apifidelitos.azurewebsites.net/api/Image",data:{file:c}}).then(function(a){f.cadastro.link_image_little=a.data.url})},f.uploadLarge=function(c){a.promise=b.upload({url:"http://apifidelitos.azurewebsites.net/api/Image",data:{file:c}}).then(function(a){f.cadastro.link_image_large=a.data.url,e.hide()},function(a){console.log("Error status: "+a.status),e.hide()})},f.Update=function(b){a.promise=c.updateInfo(f.cadastro,function(){d.toast("Informações atualizadas com sucesso!")})},f.Load=function(b){a.promise=c.getInfo(function(a){f.cadastro=a,e.hide()})}}]),angular.module("fidelitosadmApp").service("materialAlert",["$mdDialog","$mdToast",function(a,b){var c=this;return c.isLoading=!1,{loading:function(a){c.isLoading=a},alert:function(b,c){a.show(a.alert().parent(angular.element(document.body)).clickOutsideToClose(!0).title(b).textContent(c).ok("OK"))},toast:function(a){b.show(b.simple().textContent(a).position("top right").hideDelay(3e3))},toastErro:function(a){b.show(b.simple().textContent(a).action("ERRO").highlightAction(!0).highlightClass("md-accent").position("top right").hideDelay(3e3))}}}]),angular.module("fidelitosadmApp").controller("BoardCtrl",["$rootScope","Company","materialAlert","$mdDialog",function(a,b,c,d){var e=this;e.cadastro={},e.Update=function(d){a.promise=b.updateInfo(e.cadastro,function(){c.toast("Informações atualizadas com sucesso!")},function(a){console.log(a)})},e.Load=function(c){a.promise=b.getInfo(function(a){e.cadastro=a},function(a){console.log(a)})}}]),angular.module("fidelitosadmApp").controller("CodesCtrl",["$rootScope","$routeParams","Company","Card","$timeout","$window","materialAlert","$mdDialog","$mdMedia",function(a,b,c,d,e,f,g,h,i){var j=this;j.cardId=b.cardId,j.descrAdd="Adicionar",j.descrImprimir="Imprimir Disponíveis",j.descrDisp="Disponíveis",j.descrUtil="Utilizados",j.descrTotal="Total",j.descrComp="Compartilhar",j.cardId||alert("Código do cartão não informado!"),j.load=function(){i("gt-xs")||(j.descrAdd="Add.",j.descrImprimir="Imp.",j.descrDisp="Disp.",j.descrUtil="Util.",j.descrTotal="Total",j.descrComp="Comp."),j.qtdTotal=0,j.qtdAtivos=0,j.qtdUtilizados=0,a.promise=d.getById(j.cardId,function(b){j.card=b,a.promise=c.getCardCodes(j.cardId,"A",function(b){j.codigos=b.visitKeyScore,j.qtdAtivos=b.qtd,j.qtdTotal+=b.qtd,a.promise=c.getCardCodes(j.cardId,"U",function(a){j.qtdUtilizados=a.qtd,j.qtdTotal+=a.qtd})})})},j.imageQrShared=function(a){},j.shared=function(a){i("gt-xs")&&h.show(h.alert().clickOutsideToClose(!0).title("Compartilhar").textContent("clique com o botão direito e copie a imagem.").ariaLabel("Alert Dialog Demo").ok("OK").targetEvent(a)),$(".code-list").removeClass("code-list")},j.print=function(){0==j.qtdAtivos?g.toast("Não existem códigos ativos para impressão!"):e(function(){f.print()})},j.createCodes=function(a){function b(a,b,d){a.createCodes=function(){var b={idCard:j.cardId,qtd:a.qtdToAdd,score:a.scoreToAdd};console.log(b),c.CreateCardCode(b,function(){j.load(),d.toast("Códigos gerados com sucesso!"),a.closeDialog()},function(){d.toast("Não foi possível gerar os códigos. Tente novamente ou entre em contato com a nossa equipe!")})},a.closeDialog=function(){b.hide()}}var d=angular.element(document.body);h.show({parent:d,targetEvent:a,template:'<md-dialog flex="50" aria-label="Criar Códigos">  <md-toolbar>    <div class="md-toolbar-tools">      <h2>Criar Novos Códigos</h2>      <span flex></span>    </div>  </md-toolbar><form name="formAddCodes">  <md-dialog-content layout-padding>   <div layout="row">     <md-input-container flex class="md-block">       <label>Quantidade</label>       <input type="number" name="qtd" ng-model="qtdToAdd" placeholder="Quantidade de códigos a serem criados"         required="" />       <div ng-messages="formAddCodes.qtd.$error" role="alert" multiple="">         <div ng-message="required" class="my-message">Por favor, informe a Quantidade.</div>       </div>     </md-input-container>     <md-input-container flex class="md-block">       <label>Pontuação</label>       <input type="number" name="score" ng-model="scoreToAdd" placeholder="Pontuação dos novos códigos"         required="" />       <div ng-messages="formAddCodes.score.$error" role="alert" multiple="">         <div ng-message="required" class="my-message">Por favor, informe a Pontuação.</div>       </div>     </md-input-container>   </div>  </md-dialog-content>  <md-dialog-actions>    <md-button ng-disabled="!formAddCodes.$valid" ng-click="createCodes()" class="md-primary">      Criar    </md-button>    <md-button ng-click="closeDialog()" class="md-primary">      Cancelar    </md-button>  </md-dialog-actions></form></md-dialog>',controller:b}),b.$inject=["$scope","$mdDialog","materialAlert"]}}]),angular.module("fidelitosadmApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/board.html",'<md-card> <md-card-content ng-init="board.Load()"> <div layout="row"> <md-input-container flex class="md-block"> <label>Mural</label> <textarea ng-model="board.cadastro.mural" rows="5" name="mural" md-select-on-focus></textarea> </md-input-container> <div style="margin-left:50px"> <div class="marvel-device iphone5s silver"> <div class="top-bar"></div> <div class="sleep"></div> <div class="volume"></div> <div class="camera"></div> <div class="sensor"></div> <div class="speaker"></div> <div class="screen" ng-bind-html="board.cadastro.mural"> </div> <div class="home"></div> <div class="bottom-bar"></div> </div> </div> </div> <md-button class="md-raised md-primary" ng-click="board.Update()"> Salvar </md-button> </md-card-content> </md-card>'),a.put("views/card.html",'<div flex layout="row" layout-wrap ng-cloak="" ng-init="card.LoadCards()"> <md-button class="md-fab md-fab-bottom-right" ng-click="card.OpenAddCardDialog()" aria-label="Add Card" style="position:fixed !important"> <md-icon md-font-icon="glyphicon glyphicon-plus"></md-icon> <md-tooltip md-direction="top" md-visible="tooltipVisible">Adicionar Campanha</md-tooltip> </md-button> <md-card ng-hide="!main.$mdMedia(\'gt-xs\')"> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Campanhas Promocionais</span> <div flex></div> </div> </md-toolbar> <md-card-content> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column><span>Nome</span></th> <th md-column><span>Descrição</span></th> <th md-column md-numeric>Pontos p/ Resgate</th> <th md-column md-numeric>Validade (dias)</th> <th md-column></th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in card.cards"> <td md-cell>{{item.name}}</td> <td md-cell>{{item.description | limitTo:90}} <span ng-if="item.description.length > 90">...</span></td> <td md-cell>{{item.achieve}}</td> <td md-cell>{{item.interval_date}}</td> <td md-cell style="width: 140px"> <md-button class="md-icon-button" aria-label="Edit" ng-click="card.Edit(item)"> <ng-md-icon icon="settings"></ng-md-icon> <md-tooltip md-direction="top">Configurações</md-tooltip> </md-button> <md-button class="md-icon-button" aria-label="Edit" ng-href="#!/codes/{{item.id}}"> <ng-md-icon icon="apps"></ng-md-icon> <md-tooltip md-direction="top">Códigos de pontuação offline</md-tooltip> </md-button> </td> </tr> <tr ng-hide="card.cards.length"> <td colspan="4" class="text-center" style="padding: 20px"> Nenhum Registro Encontrado </td> </tr> </tbody> </table> </md-table-container> </md-card-content> </md-card> <md-card flex-lg="30" flex-md="45" flex-sm="100" ng-repeat="item in card.cards" ng-hide="main.$mdMedia(\'gt-xs\')"> <md-card-header> <md-card-header-text> <span class="md-title">{{item.name}}</span> </md-card-header-text> </md-card-header> <md-card-content layout="column" layout-align="space-between"> <p>{{item.description}}</p> <div layout="row"> <md-icon md-font-icon="glyphicon glyphicon-certificate"> {{item.achieve}} Pontos </md-icon> <md-icon md-font-icon="glyphicon glyphicon-calendar"> {{item.interval_date}} Dias </md-icon> </div> </md-card-content> <md-divider></md-divider> <md-card-actions layout="row" layout-align="end end"> <md-button class="md-icon-button" aria-label="Edit" ng-click="card.Edit(item)"> <i class="glyphicon glyphicon-cog"></i> </md-button> <md-button class="md-icon-button" aria-label="Codes" ng-href="#!/codes/{{item.id}}"> <i class="glyphicon glyphicon-th"></i> </md-button> </md-card-actions> </md-card> </div> <div style="visibility: hidden"> <div class="md-dialog-container" id="CardCodesDialog"> <md-dialog> <md-toolbar> <div class="md-toolbar-tools"> <h2 style="text-align:center">Códigos da Campanha</h2> </div> </md-toolbar> <md-dialog-content> <div layout="row" flex layout-align="center center"> <md-button md-colors="{background: \'green\'}" ng-disabled="true">Ativos <br> {{card.codes.qtdAtivos}}</md-button> <md-button md-colors="{background: \'blue\'}" ng-disabled="true">Usados <br> {{card.codes.qtdUtilizados}}</md-button> <md-button md-colors="{background: \'amber\'}" ng-disabled="true"> Total<br>{{card.codes.qtdTotal}}</md-button> </div> </md-dialog-content> <md-dialog-actions> <div layout="row" layout-align="center center"> <md-button class="md-icon-button" aria-label="Add" ng-click="card.createCodes()"> <i class="glyphicon glyphicon-plus"></i> </md-button> <md-button class="md-icon-button" aria-label="Print"> <i class="glyphicon glyphicon-print"></i> </md-button> <md-button class="md-icon-button" aria-label="Remove"> <i class="glyphicon glyphicon-trash"></i> </md-button> </div> </md-dialog-actions> </md-dialog> </div> </div> <div style="visibility: hidden"> <div class="md-dialog-container" id="addCardDialog"> <md-dialog flex="{{!main.$mdMedia(\'gt-xs\') ? 90 : 50 }}"> <form name="FormCard"> <md-toolbar> <div class="md-toolbar-tools"> <h2>{{card.editing ? \'Atualizar Campanha\' : \'Cadastrar Nova Campanha\'}}</h2> <span flex></span> </div> </md-toolbar> <md-dialog-content layout-padding> <br> <md-input-container class="md-block"> <label>Título</label> <input type="text" name="name" ng-model="card.cadastro.name" placeholder="Título da Campanha" required> <div ng-messages="FormCard.name.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe o Título.</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Descrição</label> <textarea ng-model="card.cadastro.description" placeholder="Descrição da campanha" md-maxlength="255" rows="3" required name="description" md-select-on-focus></textarea> <div ng-messages="FormCard.description.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe a descrição.</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Regulamento</label> <textarea ng-model="card.cadastro.rules" placeholder="Descrição das regras" md-maxlength="255" rows="3" required name="rules" md-select-on-focus></textarea> <div ng-messages="FormCard.description.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe o regulamento.</div> </div> </md-input-container> <div layout="row"> <md-input-container flex class="md-block"> <label>Meta de Pontos</label> <input type="number" name="achieve" ng-model="card.cadastro.achieve" placeholder="Meta de pontos para o resgate da recompensa" required> <div ng-messages="FormCard.achieve.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe a Meta.</div> </div> </md-input-container> <md-input-container flex class="md-block"> <label>Perído de Validade</label> <input type="number" name="intervalDate" ng-model="card.cadastro.interval_date" placeholder="Prazo do cliente para atingir a meta" required> <div ng-messages="FormCard.intervalDate.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe a Validade.</div> </div> </md-input-container> </div> </md-dialog-content> <md-dialog-actions> <md-button ng-disabled="!FormCard.$valid" ng-click="card.editing ? card.EditCard() : card.AddCard()" class="md-raised md-primary">{{card.editing ? \'Atualizar\' : \'Cadastrar\'}}</md-button> </md-dialog-actions> </form> </md-dialog> </div> </div>'),a.put("views/client.html",'<md-card ng-cloak="" ng-init="client.LoadClients()"> <md-fab-speed-dial class="md-scale md-fab-top-right" md-open="client.isFabOpen" md-direction="left"> <md-fab-trigger> <md-button aria-label="menu" class="md-fab md-warn"> <ng-md-icon icon="menu"></ng-md-icon> </md-button> </md-fab-trigger> <md-fab-actions> <md-button aria-label="Registrar Pontuação" class="md-fab md-raised md-mini" ng-click="client.OpenDialogAchieve();"> <md-tooltip md-direction="down" md-visible="fabTooltipVisible">Registrar Pontuação</md-tooltip> <ng-md-icon icon="done"></ng-md-icon> </md-button> <md-button aria-label="Registrar Recompensa" class="md-fab md-raised md-mini" ng-click="client.OpenDialogReward();"> <md-tooltip md-direction="left" md-visible="fabTooltipVisible">Registrar Recompensa</md-tooltip> <ng-md-icon icon="done_all"></ng-md-icon> </md-button> </md-fab-actions> </md-fab-speed-dial> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Clientes</span> <div flex></div> </div> </md-toolbar> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column><span>Nome</span></th> <th md-column><span>E-Mail</span></th> <th md-column md-numeric>Pontos</th> <th md-column md-numeric>Resgates</th> <th md-column md-numeric>Visitas</th> <th md-column>Última Visita</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="cliente in client.clients"> <td md-cell>{{cliente.name}}</td> <td md-cell>{{cliente.email}}</td> <td md-cell>{{cliente.current_score}}</td> <td md-cell>{{cliente.rewards_received}}</td> <td md-cell>{{cliente.qtd_all_visit}}</td> <td md-cell>{{cliente.last_visit | date : \'dd/MM/yyyy\'}}</td> </tr> <tr ng-hide="client.clients.length"> <td colspan="4" class="text-center" style="padding: 20px"> Nenhum Registro Encontrado </td> </tr> </tbody> </table> </md-table-container> </md-card> <div style="display: none" layout="row" flex ng-cloak=""> <div class="md-dialog-container" id="dialogRegistroPontuacao"> <md-dialog flex="50"> <div ng-cloak> <div> <form name="FormCadastro"> <md-toolbar> <div class="md-toolbar-tools"> <h1 class="md-title">Registre a Pontuação</h1> </div> </md-toolbar> <md-progress-linear md-mode="indeterminate" ng-show="client.recording"></md-progress-linear> <div layout-padding layout="column"> <md-input-container> <label>Promoção</label> <md-select ng-model="client.achieve.idCard"> <md-option ng-value="item.id" ng-repeat="item in client.cards">{{item.name}}</md-option> </md-select> </md-input-container> <md-input-container> <label>Pontos</label> <input type="number" name="achieve" ng-model="client.achieve.achieve" placeholder="pontuação a ser cadastrada" required> <div ng-messages="FormCadastro.achieve.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe a pontuação.</div> </div> </md-input-container> <md-input-container> <label>Celular</label> <input type="number" name="cellphone" id="cellphoneDivRegistry" ng-model="client.achieve.cellphone" placeholder="celular com DDD" required> <div ng-messages="FormCadastro.cellphone.$error" role="alert" multiple> </div> </md-input-container> <md-dialog-actions> <div style="vertical-align: middle; margin-right: 15px"> <md-button ng-click="client.RegisterVisit(); FormCadastro.reset()" ng-disabled="!FormCadastro.$valid || client.recording" class="md-raised md-primary">Registrar Pontuação</md-button> <ng-md-icon icon="done" ng-show="client.showRegist" size="50" style="fill: #43CD80; margin-bottom: 25px"></ng-md-icon> </div> </md-dialog-actions> </div> </form> </div> </div> </md-dialog> </div> </div>'),a.put("views/codes.html",'<md-card ng-cloak="" ng-init="codes.load()"> <p><strong>Campanha:</strong> {{codes.card.name}}</p> <p><strong>Regulamento:</strong> {{codes.card.description}}</p> <md-divider></md-divider> <div layout="row" flex layout-align="center center " class="not-print"> <md-button md-colors="{background: \'green\'}" disabled>{{codes.descrDisp}}<br>{{codes.qtdAtivos}}</md-button> <md-button md-colors="{background: \'blue\'}" disabled>{{codes.descrUtil}}<br>{{codes.qtdUtilizados}}</md-button> <md-button md-colors="{background: \'amber\'}" disabled>{{codes.descrTotal}}<br>{{codes.qtdTotal}}</md-button> </div> <md-divider></md-divider> <div layout="row" layout-align="center center" class="not-print"> <md-button aria-label="Adicionar" class="md-mini" ng-click="codes.createCodes()"> <ng-md-icon icon="note_add"></ng-md-icon> {{codes.descrAdd}} </md-button> <md-button aria-label="Imprimir" class="md-mini" ng-click="codes.print()"> <ng-md-icon icon="print"></ng-md-icon> {{codes.descrImprimir}} </md-button> <!--\r\n          <md-button aria-label="Compartilhar" class="md-mini" ng-click="codes.shared()" >\r\n            <ng-md-icon icon="share"></ng-md-icon>\r\n            {{codes.descrComp}}\r\n          </md-button>--> <!--<md-button aria-label="Remover" class="md-fab md-raised md-mini" ng-click="codes.remove()">\r\n            <ng-md-icon icon="delete"></ng-md-icon>\r\n          </md-button>--> </div> <div class="row code-list"> <div ng-repeat="code in codes.codigos" class="col-lg-2 text-center qr-code"> <qr text="code.visitKey" size="100" id="{{code.visitKey}}" ng-click="codes.imageQrShared(\'{{code.visitKey}}\')"></qr> <br> <small class="text-center"> <ng-pluralize count="code.score" when="{ \'1\': \'1 PONTO\',\'other\': \'{} PONTOS\'}"></ng-pluralize> </small> </div> </div> </md-card>'),a.put("views/login.html",'<md-content layout="row" layout-align="space-around"> <md-card flex="flex" flex-gt-sm="50" flex-gt-md="33"> <md-toolbar> <div class="md-toolbar-tools"> <h2><span>Painel de Controle <strong>Fidelitos</strong></span></h2> </div> </md-toolbar> <md-card-content layout-padding="layout-padding"> <md-tabs md-selected="login.selectedIndex" md-dynamic-height md-border-bottom md-stretch-tabs="always"> <md-tab label="Entrar"> <md-progress-linear md-mode="indeterminate" ng-disabled="!login.loading"></md-progress-linear> <md-content class="md-padding"> <form name="Form"> <md-input-container class="md-block"> <label>E-mail</label> <input type="text" name="email" ng-model="login.email" placeholder="meu@email.com" required> <div ng-messages="Form.email.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe seu E-mail.</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Senha</label> <input type="password" name="password" ng-model="login.password" placeholder="******" required md-maxlength="16"> <div ng-messages="Form.password.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe sua senha.</div> <div ng-message="md-maxlength" class="my-message">Tamanho máximo: 16 caracteres.</div> </div> </md-input-container> <div layout="row"> <md-button ng-disabled="!Form.$valid || login.loading" ng-click="login.submit()" class="md-raised md-primary">Entrar</md-button> </div> </form> </md-content> </md-tab> <md-tab label="Cadastre-se"> <md-progress-linear md-mode="indeterminate" ng-disabled="!login.loading"></md-progress-linear> <md-content class="md-padding"> <form name="FormCadastro"> <md-input-container class="md-block"> <label>Nome</label> <input type="text" name="nome" ng-model="login.cadastro.Name" placeholder="Minha Empresa" required> <div ng-messages="FormCadastro.nome.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe o Nome.</div> </div> </md-input-container> <md-input-container class="md-block"> <label>E-mail</label> <input type="email" name="email" ng-model="login.cadastro.Email" placeholder="meu@email.com" required> <div ng-messages="FormCadastro.email.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe seu E-mail.</div> <div ng-message="email" class="my-message">Por favor, informe um E-mail válido.</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Celular</label> <input type="text" name="celular" ng-model="login.cadastro.CellPhone" placeholder="(11) 9999-9999" required> <div ng-messages="FormCadastro.celular.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe seu Celular.</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Senha</label> <input type="password" name="password" ng-model="login.cadastro.Password" placeholder="******" required md-maxlength="16"> <div ng-messages="FormCadastro.password.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe sua senha.</div> <div ng-message="md-maxlength" class="my-message">Tamanho máximo: 16 caracteres.</div> </div> </md-input-container> <md-input-container class="md-block"> <label>Confirmação de Senha</label> <input type="password" name="password" ng-model="login.cadastro.ConfirmPassword" placeholder="******" required md-maxlength="16"> <div ng-messages="FormCadastro.password.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe sua senha.</div> <div ng-message="md-maxlength" class="my-message">Tamanho máximo: 16 caracteres.</div> </div> </md-input-container> <md-button ng-disabled="!FormCadastro.$valid" ng-click="login.cadastro.submit()" class="md-raised md-primary">Cadastrar</md-button> </form> </md-content> </md-tab> </md-tabs> </md-card-content> </md-card> </md-content>'),
a.put("views/main.html","Usuário logado com sucesso"),a.put("views/ombudsman.html",'<md-card> <md-toolbar class="md-table-toolbar md-default" ng-init="ombudsman.LoadItens()"> <div class="md-toolbar-tools"> <span>Ouvidoria</span> <div flex></div> </div> </md-toolbar> <md-table-container> <table md-table> <thead md-head> <tr md-row> <th md-column class="col-md-1"></th> <th md-column class="col-md-2">Tipo</th> <th md-column class="col-md-3">Cliente</th> <th md-column class="col-md-6">Texto</th> </tr> </thead> <tbody md-body> <tr md-row ng-repeat="item in ombudsman.itens"> <td md-cell> <i class="glyphicon" style="font-size:1.5em" ng-class="{\'glyphicon-thumbs-up\': item.type == \'Elogio\', \'glyphicon-thumbs-down\': item.type == \'Reclamação\', \'glyphicon glyphicon-asterisk\' : item.type == \'Sugestão\'}"></i> </td> <td md-cell>{{item.type}}</td> <td md-cell>{{item.client.name || \'Anônimo\'}} </td> <td md-cell>{{item.text}}</td> </tr> <tr ng-hide="ombudsman.itens.length"> <td colspan="4" class="text-center" style="padding: 20px"> Nenhum Registro Encontrado </td> </tr> </tbody> </table> </md-table-container> </md-card>'),a.put("views/settings.html",'<md-card ng-cloak="ng-cloak" ng-init="settings.Load()"> <md-toolbar class="md-table-toolbar md-default"> <div class="md-toolbar-tools"> <span>Perfil</span> <div flex></div> </div> </md-toolbar> <md-card-content> <form name="formSettings"> <div layout="row"> <md-input-container flex class="md-block"> <label>Nome</label> <input type="text" name="name" ng-model="settings.cadastro.name" required> <div ng-messages="formSettings.name.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe o Nome</div> </div> </md-input-container> <md-input-container flex class="md-block"> <label>E-mail</label> <input type="email" name="email" ng-model="settings.cadastro.email" required> <div ng-messages="formSettings.email.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe o E-mail.</div> </div> </md-input-container> <md-input-container flex class="md-block"> <label>CNPJ/CPF</label> <input type="text" name="cpf_cnpj" ng-model="settings.cadastro.cpf_cnpj" required> <div ng-messages="formSettings.cpf_cnpj.$error" role="alert" multiple> <div ng-message="required" class="my-message">Por favor, informe o CNPJ ou CPF.</div> </div> </md-input-container> </div> <div layout="row"> <md-input-container flex class="md-block"> <label>Endereço</label> <input type="text" name="address" ng-model="settings.cadastro.address"> </md-input-container> </div> <div layout="row"> <md-input-container flex class="md-block"> <label>Link Site</label> <input type="text" name="link_map" ng-model="settings.cadastro.link_site"> </md-input-container> <md-input-container flex class="md-block"> <label>Link Facebook</label> <input type="text" name="link_facebook" ng-model="settings.cadastro.link_facebook"> </md-input-container> <md-input-container flex class="md-block"> <label>Link Google Maps</label> <input type="text" name="link_map" ng-model="settings.cadastro.link_map"> </md-input-container> </div> <div layout="row"> <md-input-container flex class="md-block"> <label>Descrição</label> <textarea ng-model="settings.cadastro.description" md-maxlength="255" rows="3" name="description" md-select-on-focus></textarea> </md-input-container> </div> <div layout="row" layout-padding layout-wrap layout-fill> <md-card flex> <md-button class="md-raised" ngf-select="settings.uploadLarge($file)" type="file"> Imagem Principal </md-button> <img style="width:205px;margin: 0 auto" src="{{settings.cadastro.link_image_large}}"> </md-card> <md-card flex> <md-button class="md-raised" ngf-select="settings.uploadLittle($file)" type="file">Logomarca</md-button> <img style="width:100px; height:100px; margin: 0 auto" class="img-circle profile-photo" src="{{settings.cadastro.link_image_little}}"> </md-card> </div> <md-button class="md-raised md-primary" ng-click="settings.Update()"> Salvar </md-button> </form> </md-card-content> </md-card>')}]);